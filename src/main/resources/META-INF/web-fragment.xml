<web-fragment>
    <!--
        This will register the JAX-RS servlet against all URLs
        See https://docs.jboss.org/author/display/AS7/JAX-RS+Reference+Guide
    -->
    <servlet-mapping>
        <servlet-name>javax.ws.rs.core.Application</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <!--
        This will add security to all urls
    -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>ApiOmega</web-resource-name>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>*</role-name>    <!-- Accept any role when accessing these resources -->
        </auth-constraint>
    </security-constraint>

    <!--
        Secure the WAR file with KeyCloak
        http://keycloak.github.io/docs/userguide/keycloak-server/html/ch08.html#d4e919
    -->
    <login-config>
        <auth-method>KEYCLOAK</auth-method>
        <realm-name>this is ignored currently</realm-name>
    </login-config>
</web-fragment>