<web-fragment>
    <!--
        This will add security to all urls
    -->
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>ApiOmega</web-resource-name>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>*</role-name>    <!-- Accept any role when accessing these resources -->
        </auth-constraint>
    </security-constraint>

    <!--
        Secure the WAR file with KeyCloak
        http://keycloak.github.io/docs/userguide/keycloak-server/html/ch08.html#d4e919
    -->
    <login-config>
        <auth-method>KEYCLOAK</auth-method>
        <realm-name>this is ignored currently</realm-name>
    </login-config>

    <!--
        This will log each request for auditing purposes
    -->
    <servlet>
        <servlet-name>LoggingFilter</servlet-name>
        <servlet-class>com.apiomega.filter.LoggingFilter</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>LoggingFilter</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

    <!--
        This will enforce the URL structure
    -->
    <servlet>
        <servlet-name>UrlValidationFilter</servlet-name>
        <servlet-class>com.apiomega.filter.UrlValidationFilter</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>UrlValidationFilter</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-fragment>